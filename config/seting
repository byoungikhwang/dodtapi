import os
from dotenv import load_dotenv

# 1. .env 파일 로드
# 같은 폴더에 있는 .env 파일을 찾아서, 그 안의 내용을 컴퓨터의 환경 변수로 불러옵니다.
load_dotenv()

class Settings:
    # --- 기본 프로젝트 정보 ---
    # : str 은 이 변수가 문자열(글자)이어야 한다는 '힌트'입니다.
    PROJECT_NAME: str = "AI Persona Customer Survey"
    PROJECT_VERSION: str = "0.9.0"
    
    # --- 데이터베이스(DB) 연결 정보 ---
    # os.getenv("이름", "기본값") -> .env에서 "이름"을 찾고, 없으면 "기본값"을 씁니다.
    
    # DB 사용자 이름 (예: postgres)
    POSTGRES_USER: str = os.getenv("POSTGRES_USER")
    # DB 비밀번호 (보안 중요!)
    POSTGRES_PASSWORD: str = os.getenv("POSTGRES_PASSWORD")
    # DB 주소 (내 컴퓨터면 localhost, 도커면 db_postgresql 등)
    POSTGRES_SERVER: str = os.getenv("DB_HOST", "localhost")
    # DB 포트 번호 (보통 5432)
    POSTGRES_PORT: str = os.getenv("DB_PORT", 5432) # 숫자가 아닌 문자로 처리됨에 주의
    # 사용할 데이터베이스 이름 (기본값: tdd)
    POSTGRES_DB: str = os.getenv("POSTGRES_DB", "tdd")
    
    # [중요] DB 접속 주소 완성하기
    # 위에서 가져온 조각들을 합체해서 하나의 완성된 주소로 만듭니다.
    # 형식: postgresql://아이디:비번@주소:포트/DB이름
    DATABASE_URL = f"postgresql://{POSTGRES_USER}:{POSTGRES_PASSWORD}@{POSTGRES_SERVER}:{POSTGRES_PORT}/{POSTGRES_DB}"

    # --- 보안 및 로그인(JWT) 설정 ---
    # 암호화에 사용할 비밀키 (절대 남에게 보여주면 안 됨)
    SECRET_KEY: str = os.getenv("SECRET_KEY")
    # 암호화 알고리즘 (HS256을 주로 사용)
    ALGORITHM: str = "HS256"
    # 로그인 유지 시간 (30분)
    ACCESS_TOKEN_EXPIRE_MINUTES: int = 30

# 설정을 실제로 사용할 수 있게 객체로 만듦
# 이제 다른 파일에서 settings.PROJECT_NAME 처럼 불러서 쓸 수 있습니다.
settings = Settings()