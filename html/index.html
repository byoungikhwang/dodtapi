<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>From Zero to LOUD - AI Fashion Creator</title>
    <!-- ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ: Tailwind CSS, Google Fonts, Lucide Icons -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        /* --- ê¸°ë³¸ ë° ì „ì—­ ìŠ¤íƒ€ì¼ --- */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff; /* ê¹Šì€ ë³´ë¼ìƒ‰ ë°°ê²½ */
            color: #ffffff;
            line-height: 1.6;
        }

        /* --- UI ì»´í¬ë„ŒíŠ¸ ìŠ¤íƒ€ì¼ --- */
        /* ë©”ì¸ í—¤ë”ì˜ ë„¤ì˜¨ íš¨ê³¼ í…ìŠ¤íŠ¸ */
        .neon-text {
            text-shadow: 0 0 5px #f0f, 0 0 10px #f0f, 0 0 20px #f0f;
        }
        /* ë¡œê³  ì£¼ìœ„ì˜ ë„¤ì˜¨ íš¨ê³¼ í…Œë‘ë¦¬ */
        .neon-circle-border {
            border: 3px solid #f0f;
            box-shadow: 0 0 15px #f0f, 0 0 25px rgba(255, 0, 255, 0.5);
            position: relative; 
            z-index: 10; 
        }
        /* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ í™œì„± íƒ­ í‘œì‹œì¤„ */
        .tab-highlight {
            height: 4px;
            background-color: #06B6D4; /* ì‹œì•ˆìƒ‰ */
            position: absolute;
            bottom: 0;
            transition: left 0.3s ease, width 0.3s ease;
        }
        /* ì£¼ìš” ì•¡ì…˜ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .cyan-button {
            background-color: #06B6D4;
            color: #1a0033;
            transition: all 0.3s;
        }
        .cyan-button:hover {
            background-color: #0891b2; 
            transform: scale(1.02);
            box-shadow: 0 0 15px rgba(6, 182, 212, 0.4);
        }
        .cyan-button:disabled {
            background-color: #4b5563;
            color: #9ca3af;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* í—¤ë” ë°°ê²½ ìœ„ í…ìŠ¤íŠ¸ ê°€ë…ì„±ì„ ìœ„í•œ ì˜¤ë²„ë ˆì´ */
        .splash-bg::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1;
        }
        
        /* --- 'Create' íƒ­ ë‚´ë¶€ ìŠ¤íƒ€ì¼ --- */
        /* í…ìŠ¤íŠ¸ ì…ë ¥ í•„ë“œ */
        .login-input {
            background-color: #312e81;
            border: 1px solid #6366f1;
            color: #ffffff;
            transition: border-color 0.3s;
        }
        .login-input:focus {
            outline: none;
            border-color: #06B6D4;
            box-shadow: 0 0 0 2px rgba(6, 182, 212, 0.2);
        }
        .login-input::placeholder {
            color: #9ca3af;
        }
        /* ì´ë¯¸ì§€ ì—…ë¡œë“œ ì˜ì—­ */
        .upload-area {
            border: 2px dashed #6366f1;
            transition: all 0.3s;
            background-color: rgba(49, 46, 129, 0.4);
        }
        .upload-area:hover {
            border-color: #06B6D4;
            background-color: rgba(49, 46, 129, 0.8);
        }
        /* í”„ë¡¬í”„íŠ¸ ì¶”ì²œ ì˜µì…˜ ì¹© */
        .option-chip {
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #d1d5db;
            padding: 0.5rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }
        .option-chip:hover {
            background-color: #06B6D4;
            border-color: #06B6D4;
            color: #1a0033;
            font-weight: bold;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        .option-chip:active { transform: translateY(0); }
        .option-chip.selected { /* í´ë¦­ ì‹œ ì ì‹œ í™œì„±í™”ë˜ëŠ” ì‹œê°ì  í”¼ë“œë°± */
            background-color: #06B6D4;
            border-color: #06B6D4;
            color: #1a0033;
            font-weight: bold;
        }
        /* ì„±ë³„ ì„ íƒ ë¼ë””ì˜¤ ë²„íŠ¼ */
        .gender-radio:checked + label {
            background-color: #06B6D4;
            color: #1a0033;
            font-weight: bold;
            border-color: #06B6D4;
            box-shadow: 0 0 10px rgba(6, 182, 212, 0.3);
        }
        /* ì•„ì½”ë””ì–¸ ë©”ë‰´ (ìƒì„¸ ì˜µì…˜) */
        details > summary {
            list-style: none;
            cursor: pointer;
        }
        details > summary::-webkit-details-marker { display: none; }
        details[open] summary {
            background-color: rgba(255,255,255,0.1);
            border-radius: 0.5rem 0.5rem 0 0;
        }
        
        /* ê¸°íƒ€ ìœ í‹¸ë¦¬í‹° ìŠ¤íƒ€ì¼ */
        .image-preview {
            max-width: 100%;
            height: auto;
            max-height: 250px;
            object-fit: contain;
        }
        .history-image {
            height: 250px;
            object-fit: cover;
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1a0033; }
        ::-webkit-scrollbar-thumb { background: #4c1d95; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #6d28d9; }
    </style>
</head>
<body>

    <!-- ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…Œì´ë„ˆ -->
    <div id="app" class="min-h-screen">
        
        <!-- 1. í˜ì´ì§€ ìƒë‹¨ í—¤ë” ë° ë¡œê³  ì„¹ì…˜ [ìˆ˜ì •ë¨: image_23af44.png ìŠ¤íƒ€ì¼ ì ìš©] -->
        <header class="relative flex items-center justify-between px-8 py-6 bg-white z-50">
            <!-- Left: í”¼ë“œ, ë§ˆì´í˜ì´ì§€ -->
            <nav class="flex items-center gap-8">
                <a href="#" onclick="navigateTo('trend'); return false;" class="text-sm font-bold text-gray-400 hover:text-black transition-colors">í”¼ë“œ</a>
                <a href="#" onclick="navigateTo('mypage'); return false;" class="text-sm font-bold text-gray-400 hover:text-black transition-colors">ë§ˆì´í˜ì´ì§€</a>
            </nav>

            <!-- Center: Logo (index.html) -->
            <a href="index.html" class="absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2">
                <div class="flex items-center justify-center w-12 h-12 border-2 border-black rounded-full hover:bg-gray-50 transition-colors">
                    <i data-lucide="shirt" class="w-6 h-6 text-black"></i>
                </div>
            </a>

            <!-- Right: ë¡œê·¸ì¸, íŠ¸ëœë“œ -->
            <nav class="flex items-center gap-8">
                <a href="login.html" class="text-sm font-bold text-gray-400 hover:text-black transition-colors">ë¡œê·¸ì¸</a>
                <a href="#" onclick="navigateTo('trend'); setActiveTab('results'); return false;" class="text-sm font-bold text-gray-400 hover:text-black transition-colors">íŠ¸ëœë“œ</a>
            </nav>
        </header>

        <!-- [ìˆ˜ì •ëœ ë¶€ë¶„] í˜ì´ì§€ ì´ë™ ë²„íŠ¼ ê·¸ë£¹: ëª¨ë“  ë²„íŠ¼ ì‚¬ì´ì¦ˆ(flex-1, h-24) ë™ì¼í•˜ê²Œ í†µì¼ -->
        <section class="mt-12">
            <div class="flex flex-wrap justify-center items-stretch gap-3 sm:gap-4 max-w-4xl mx-auto">
                <!-- 1. ë¼ì´ë¸ŒëŸ¬ë¦¬: flex-1, h-24 ì ìš© -->
                <button onclick="navigateTo('results'); setActiveTab('results')" class="flex-1 min-w-[70px] h-24 flex flex-col items-center justify-center p-2 bg-gray-800/50 hover:bg-indigo-600/50 rounded-xl border border-white/10 transition-all">
                    <i data-lucide="library" class="w-6 h-6 mb-2 text-gray-300"></i>
                    <span class="text-xs sm:text-sm text-gray-300 font-bold">ë¼ì´ë¸ŒëŸ¬ë¦¬</span>
                </button>

                <!-- 2. í™ˆ: flex-1, h-24 ì ìš© -->
                <button onclick="navigateTo('trend')" class="flex-1 min-w-[70px] h-24 bg-gray-800/50 hover:bg-indigo-600/50 rounded-xl border border-white/10 transition-all overflow-hidden">
	                <img src="../image/home.png" alt="í™ˆ" class="w-full h-full object-cover">
                </button>

                <!-- 3. ì½”ë”” ìƒì„±í•˜ê¸°: flex-[2] -> flex-1 ë³€ê²½í•˜ì—¬ í¬ê¸° ë™ì¼í™”, h-24 ì ìš© -->
                <button onclick="goToCreateCoordi()" class="flex-1 min-w-[70px] h-24 flex flex-col items-center justify-center p-2 bg-gray-800/50 hover:bg-indigo-600/50 rounded-xl border border-white/10 transition-all">
                    <i data-lucide="shirt" class="w-6 h-6 mb-2 text-gray-300"></i>
                    <span class="text-xs sm:text-sm text-gray-300 font-bold">ì½”ë”” ìƒì„±</span>
                </button>

                <!-- 4. ë§ˆì´í˜ì´ì§€: flex-1, h-24 ì ìš© -->
                <button onclick="navigateTo('mypage')" class="flex-1 min-w-[70px] h-24 flex flex-col items-center justify-center p-2 bg-gray-800/50 hover:bg-indigo-600/50 rounded-xl border border-white/10 transition-all">
                    <i data-lucide="user" class="w-6 h-6 mb-2 text-gray-300"></i>
                    <span class="text-xs sm:text-sm text-gray-300 font-bold">ë§ˆì´í˜ì´ì§€</span>
                </button>
            </div>
        </section>

        <!-- 2. ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ -->
        <main class="container mx-auto px-4 py-8 max-w-7xl">
            
            <!-- í˜ì´ì§€ ì„¹ì…˜ 1: ê¸°ë³¸ ì½˜í…ì¸  (íƒ­ í¬í•¨) -->
            <div id="trend" class="page-section">
                
                <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
                <section class="mb-8">
                    <div class="tabs-container rounded-t-xl rounded-b-lg p-1 shadow-2xl relative">
                        <div id="tabs" class="flex relative">
                            <button data-tab="trend-feed" class="tab-button flex-1 p-3 text-white font-semibold transition-all duration-300 relative rounded-t-xl">OOTD</button>
                            <div class="relative group flex-1">
                                <button data-tab="beginner" class="tab-button w-full p-3 text-white font-semibold transition-all duration-300 relative rounded-t-xl">Beginner</button>
                                <div class="absolute z-10 hidden group-hover:block bg-indigo-900/90 border border-cyan-500/50 text-white py-2 rounded-lg shadow-xl w-full mt-1">
                                    <a href="#" class="block px-4 py-2 text-sm hover:bg-cyan-400 hover:text-indigo-900 font-semibold">ê³µì‚¬ì¤‘ ì…ë‹ˆë‹¤.</a>
                                </div>
                            </div>

                            <button data-tab="results" class="tab-button flex-1 p-3 text-white font-semibold transition-all duration-300 relative rounded-t-xl">Trendy</button>
                            <div id="tab-indicator" class="tab-highlight"></div>
                        </div>
                    </div>
                </section>
                
                <!-- íƒ­ ì½˜í…ì¸  í‘œì‹œ ì˜ì—­ -->
                <div id="tab-content" class="min-h-[40vh] p-6">
                    
                    <!-- íƒ­ 1: OOTD (ì˜¤ëŠ˜ì˜ ì½”ë”” ì¶”ì²œ) -->
                    <div id="trend-feed" class="tab-page">
                        <h2 class="text-2xl font-bold text-white mb-4">ì˜¤ëŠ˜ì˜ ì½”ë”” ì¶”ì²œ (OOTD)</h2>
                        
                        <!-- ê°¤ëŸ¬ë¦¬ ë ˆì´ì•„ì›ƒ -->
                        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                            <!-- Look 1: í´ë˜ì‹ -->
                            <div class="relative rounded-xl overflow-hidden shadow-lg transform transition duration-300 hover:scale-[1.02] cursor-pointer group" onclick="toggleZoom(this)">
                                <img src="https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=800&auto=format&fit=crop&q=60" alt="OOTD Look 1 - Classic" class="w-full h-full object-cover">
                                <div class="absolute inset-0 bg-black bg-opacity-20 flex items-end p-3 transition-opacity group-hover:bg-opacity-30">
                                    <span class="text-xs font-medium text-white p-1 rounded bg-black bg-opacity-50">#í´ë˜ì‹</span>
                                </div>
                                <div class="absolute top-3 right-3 flex items-center gap-3 z-10">
                                    <button onclick="toggleStar(event, this)" class="p-1.5 rounded-full bg-black/30 hover:bg-black/50 transition-all focus:outline-none group/star">
                                        <i data-lucide="star" class="w-5 h-5 text-white group-hover/star:text-yellow-400 transition-colors" fill="none"></i>
                                    </button>
                                    <button onclick="toggleHeart(event, this)" class="flex items-center gap-1.5 p-1.5 pr-2.5 rounded-full bg-black/30 hover:bg-black/50 transition-all focus:outline-none group/heart">
                                        <i data-lucide="heart" class="w-5 h-5 text-white group-hover/heart:text-red-500 transition-colors" fill="none"></i>
                                        <span class="text-white font-semibold text-xs">120</span>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Look 2: ìºì£¼ì–¼ -->
                            <div class="relative rounded-xl overflow-hidden shadow-lg transform transition duration-300 hover:scale-[1.02] cursor-pointer group" onclick="toggleZoom(this)">
                                <img src="https://images.unsplash.com/photo-1552374196-1ab2a1c593e8?w=800&auto=format&fit=crop&q=60" alt="OOTD Look 2 - Casual" class="w-full h-full object-cover">
                                <div class="absolute inset-0 bg-black bg-opacity-20 flex items-end p-3 transition-opacity group-hover:bg-opacity-30">
                                    <span class="text-xs font-medium text-white p-1 rounded bg-black bg-opacity-50">#ìºì£¼ì–¼</span>
                                </div>
                                <div class="absolute top-3 right-3 flex items-center gap-3 z-10">
                                    <button onclick="toggleStar(event, this)" class="p-1.5 rounded-full bg-black/30 hover:bg-black/50 transition-all focus:outline-none group/star">
                                        <i data-lucide="star" class="w-5 h-5 text-white group-hover/star:text-yellow-400 transition-colors" fill="none"></i>
                                    </button>
                                    <button onclick="toggleHeart(event, this)" class="flex items-center gap-1.5 p-1.5 pr-2.5 rounded-full bg-black/30 hover:bg-black/50 transition-all focus:outline-none group/heart">
                                        <i data-lucide="heart" class="w-5 h-5 text-white group-hover/heart:text-red-500 transition-colors" fill="none"></i>
                                        <span class="text-white font-semibold text-xs">85</span>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Look 3: ìŠ¤íŠ¸ë¦¿ -->
                            <div class="relative rounded-xl overflow-hidden shadow-lg transform transition duration-300 hover:scale-[1.02] cursor-pointer group" onclick="toggleZoom(this)">
                                <img src="https://images.unsplash.com/photo-1515347619252-60a6bf4fffce?w=800&auto=format&fit=crop&q=60" alt="OOTD Look 3 - Street" class="w-full h-full object-cover">
                                <div class="absolute inset-0 bg-black bg-opacity-20 flex items-end p-3 transition-opacity group-hover:bg-opacity-30">
                                    <span class="text-xs font-medium text-white p-1 rounded bg-black bg-opacity-50">#ìŠ¤íŠ¸ë¦¿</span>
                                </div>
                                <div class="absolute top-3 right-3 flex items-center gap-3 z-10">
                                    <button onclick="toggleStar(event, this)" class="p-1.5 rounded-full bg-black/30 hover:bg-black/50 transition-all focus:outline-none group/star">
                                        <i data-lucide="star" class="w-5 h-5 text-white group-hover/star:text-yellow-400 transition-colors" fill="none"></i>
                                    </button>
                                    <button onclick="toggleHeart(event, this)" class="flex items-center gap-1.5 p-1.5 pr-2.5 rounded-full bg-black/30 hover:bg-black/50 transition-all focus:outline-none group/heart">
                                        <i data-lucide="heart" class="w-5 h-5 text-white group-hover/heart:text-red-500 transition-colors" fill="none"></i>
                                        <span class="text-white font-semibold text-xs">230</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- [User Request] Trending Now ìˆ˜ì •: ì œëª© í•˜ë‹¨ì— íšŒìƒ‰ ë°•ìŠ¤ ì¶”ê°€í•˜ê³ , ë³´ë¼ìƒ‰ ë§í¬ ë²„íŠ¼ì€ ìœ ì§€ -->
                        <div class="mt-8 space-y-4">
                            <h3 class="text-xl font-bold text-gray-800">Trending Now</h3>
                            
                            <!-- 1. [Modified] ë„¤ì´ë²„ íŒ¨ì…˜íƒ€ìš´ ë§í¬ ë²„íŠ¼ (íšŒìƒ‰ ë°°ê²½, ë§í¬ í™œì„±í™”, í…ìŠ¤íŠ¸ í¬ê¸° í™•ëŒ€ ë° ìƒ‰ìƒ ë³´ì •, í™•ëŒ€ íš¨ê³¼ ì œê±°) -->
                            <a href="https://shopping.naver.com/window/main/fashion-group" target="_blank" class="block bg-gray-300 hover:bg-gray-300 transition-all duration-300 shadow-lg hover:shadow-gray-300/50 p-4 rounded-xl flex items-center justify-between text-black">
                                <div>
                                    <span class="block font-bold text-base text-gray-700 mb-2">íŠ¸ë Œë””í•œ íŒ¨ì…˜ ì •ë³´ ë° ë‰´ìŠ¤ë“¤ ê²Œì‹œ ì˜ˆì •.</span>
                                    <span class="font-bold text-lg text-black">[ë„¤ì´ë²„ ìµœì‹  íŒ¨ì…˜] í´ë¦­</span>
                                    <span class="block text-sm text-blue-600 mt-1">https://shopping.naver.com/window/main/fashion-group</span>
                                    <div class="h-8"></div>
                                </div>
                                <i data-lucide="chevron-right" class="w-6 h-6 text-gray-600"></i>
                            </a>

                            <!-- [Added] ë²„íŠ¼ ì‚¬ì´ ê°„ê²© ì¶”ê°€ (2ì¤„ ì •ë„ì˜ ì—¬ë°±) -->
                            <div class="h-4"></div>

                            <!-- 2. [Restored] ë³´ë¼ìƒ‰ ë§í¬ ë²„íŠ¼ (ê¸°ì¡´ ìœ ì§€) -->
                            <a href="https://woman.donga.com/fashion" target="_blank" class="block bg-gradient-to-r from-purple-600 to-cyan-500 hover:from-purple-700 hover:to-cyan-600 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-cyan-500/50 p-4 rounded-xl flex items-center justify-between text-white">
                                <div>
                                    <span class="font-bold">íŠ¸ëœë””í•œ íŒ¨ì…˜ ì •ë³´ ë° ë‰´ìŠ¤[ì—¬ì„±ë™ì•„ íŒ¨ì…˜ ì±„ë„] í´ë¦­</span>
                                    <span class="block text-sm text-cyan-200 mt-1">https://woman.donga.com/fashion</span>
                                </div>
                                <i data-lucide="chevron-right" class="w-6 h-6 text-white"></i>
                            </a>
                        </div>
                    </div>

                    <!-- íƒ­ 2: Create (ë‚˜ë§Œì˜ AI ì½”ë”” ìƒì„±) -->
                    <div id="create-coordi" class="tab-page hidden">
                        <div class="bg-indigo-900/40 rounded-2xl p-6 border border-indigo-500/30 shadow-xl">
                            <h2 class="text-2xl font-bold mb-2 text-center text-cyan-400">AI Stylist Studio</h2>
                            <p class="text-center text-gray-300 mb-8 text-sm">ë‚´ ì‚¬ì§„ì— ìƒˆë¡œìš´ ìŠ¤íƒ€ì¼ì„ ì…í˜€ë³´ì„¸ìš”.</p>
                            <div class="flex flex-col gap-8">
                                <!-- ì…ë ¥ ì„¹ì…˜ 1: ì´ë¯¸ì§€ ì—…ë¡œë“œ & ì„±ë³„ ì„ íƒ -->
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                    <!-- ì´ë¯¸ì§€ ì—…ë¡œë“œ -->
                                    <div class="flex flex-col h-full">
                                        <label class="flex items-center gap-2 text-lg font-bold mb-3 text-purple-300">
                                            <span class="flex items-center justify-center w-6 h-6 rounded-full bg-purple-600 text-xs text-white">1</span>
                                            ë‚´ ì‚¬ì§„ ì—…ë¡œë“œ
                                        </label>
                                        <div class="upload-area flex-grow rounded-xl flex items-center justify-center cursor-pointer h-[400px] relative overflow-hidden" onclick="document.getElementById('file-input').click()">
                                            <input type="file" id="file-input" accept="image/*" class="hidden" onchange="previewImage(event)">
                                            <img id="image-preview" class="hidden absolute inset-0 w-full h-full object-contain z-10" alt="ë¯¸ë¦¬ë³´ê¸°">
                                            <div id="upload-placeholder" class="text-center z-0">
                                                <i data-lucide="image-plus" class="w-10 h-10 text-cyan-300 mb-2"></i>
                                                <p class="text-white font-medium">ìì‹ ì˜ ì–¼êµ´, ë°˜ì‹ ìƒ· ì„ íƒ</p>
                                                <p class="text-white font-medium">í´ë¦­í•˜ì—¬ ì‚¬ì§„ ì—…ë¡œë“œ</p>
                                                <p class="text-gray-400 text-sm mt-1">JPG, PNG (Max 5MB)</p>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- ì„±ë³„ & í”„ë¡¬í”„íŠ¸ ì…ë ¥ -->
                                    <div class="flex flex-col gap-6">
                                        <!-- ì„±ë³„ ì„ íƒ -->
                                        <div>
                                            <label class="flex items-center gap-2 text-lg font-bold mb-3 text-purple-300">
                                                <span class="flex items-center justify-center w-6 h-6 rounded-full bg-purple-600 text-xs text-white">2</span>
                                                ëª¨ë¸ ì„±ë³„ ì„ íƒ
                                            </label>
                                            <div class="grid grid-cols-3 gap-3">
                                                <!-- ì—¬ì„± -->
                                                <div>
                                                    <input type="radio" id="gender-female" name="gender" value="Female model" class="gender-radio hidden" checked>
                                                    <label for="gender-female" class="flex flex-col items-center justify-center py-3 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 cursor-pointer">
                                                        <i data-lucide="user" class="w-5 h-5 mb-1"></i><span class="text-sm">ì—¬ì„±</span>
                                                    </label>
                                                </div>
                                                <!-- ë‚¨ì„± -->
                                                <div>
                                                    <input type="radio" id="gender-male" name="gender" value="Male model" class="gender-radio hidden">
                                                    <label for="gender-male" class="flex flex-col items-center justify-center py-3 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 cursor-pointer">
                                                        <i data-lucide="user" class="w-5 h-5 mb-1"></i><span class="text-sm">ë‚¨ì„±</span>
                                                    </label>
                                                </div>
                                                <!-- ê³µìš© -->
                                                <div>
                                                    <input type="radio" id="gender-unisex" name="gender" value="Unisex fashion model" class="gender-radio hidden">
                                                    <label for="gender-unisex" class="flex flex-col items-center justify-center py-3 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 cursor-pointer">
                                                        <i data-lucide="users" class="w-5 h-5 mb-1"></i><span class="text-sm">ê³µìš©</span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- ìŠ¤íƒ€ì¼ ì„¤ëª… (í”„ë¡¬í”„íŠ¸) -->
                                        <div class="flex-grow flex flex-col">
                                            <label class="flex items-center gap-2 text-lg font-bold mb-3 text-purple-300">
                                                <span class="flex items-center justify-center w-6 h-6 rounded-full bg-purple-600 text-xs text-white">3</span>
                                                ìŠ¤íƒ€ì¼ ì„¤ëª…
                                            </label>
                                            <textarea id="style-prompt" class="w-full h-full min-h-[150px] p-4 rounded-xl login-input" placeholder="ì˜ˆ: ë¹ˆí‹°ì§€, ì¹´í˜(ë°ì´íŠ¸), íœ´ì–‘ì§€(í•´ë³€), ì´ˆí˜„ì‹¤ì ì¸ ë””í…Œì¼, í’€ìƒ· ìŠ¤íƒ€ì¼"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <!-- ì…ë ¥ ì„¹ì…˜ 2: ìƒì„¸ ì˜µì…˜ ì„ íƒ -->
                                <div>
                                    <label class="flex items-center gap-2 text-lg font-bold mb-3 text-purple-300">
                                        <span class="flex items-center justify-center w-6 h-6 rounded-full bg-purple-600 text-xs text-white">4</span>
                                        ìƒì„¸ ì˜µì…˜ ì„ íƒ (í´ë¦­í•˜ì—¬ ì¶”ê°€)
                                    </label>
                                    <div id="prompt-options-container" class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                        <!-- JavaScriptì— ì˜í•´ ë™ì ìœ¼ë¡œ ì±„ì›Œì§ -->
                                    </div>
                                </div>
                                <!-- AI ìƒì„± ë²„íŠ¼ -->
                                <button id="generate-button" onclick="generateCoordi()" class="w-full py-4 font-bold rounded-xl cyan-button" disabled>
                                    AI ì½”ë”” ìƒì„±í•˜ê¸°
                                </button>
                            </div>
                            <!-- ê²°ê³¼ í‘œì‹œ ì˜ì—­ -->
                            <div id="result-area" class="mt-12 hidden border-t border-indigo-500/30 pt-10">
                                <h3 class="text-2xl font-bold text-white mb-6 text-center">Creation Result</h3>
                                <!-- ë¡œë”© ì¸ë””ì¼€ì´í„° -->
                                <div id="loading-indicator" class="hidden text-center py-12">
                                    <div class="relative w-20 h-20 mx-auto animate-spin">
                                        <div class="absolute inset-0 rounded-full border-4 border-indigo-700"></div>
                                        <div class="absolute inset-0 rounded-full border-4 border-t-cyan-400"></div>
                                    </div>
                                    <p class="text-cyan-400 font-bold mt-4">AIê°€ ìŠ¤íƒ€ì¼ì„ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
                                </div>
                                <!-- ê²°ê³¼ ì´ë¯¸ì§€ -->
                                <div id="result-container" class="hidden text-center">
                                    <img id="result-image" class="w-full h-auto object-cover rounded-xl shadow-2xl max-w-md mx-auto" alt="ê²°ê³¼ ì´ë¯¸ì§€">
                                    <button onclick="downloadResult()" class="mt-4 w-full max-w-md py-2 bg-white text-black font-bold rounded-lg hover:bg-gray-200">
                                        ì´ë¯¸ì§€ ì €ì¥í•˜ê¸°
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- íƒ­ 3: Trendy (ê²°ê³¼ë¬¼ ë¦¬ìŠ¤íŠ¸) -->
                    <div id="results" class="tab-page hidden p-8 text-center bg-indigo-900/40 rounded-xl shadow-inner">
                        <p class="text-xl text-gray-300">ê²°ê³¼ë¬¼ ì½˜ì†” íƒ­ì…ë‹ˆë‹¤. ìƒì„±ëœ ì½”ë”” ê²°ê³¼ ì´ë¯¸ì§€ë“¤ì„ ë³´ì—¬ì£¼ëŠ” ê°¤ëŸ¬ë¦¬ ê¸°ëŠ¥ì„ ì—¬ê¸°ì— êµ¬í˜„í•  ì˜ˆì •ì…ë‹ˆë‹¤.</p>
                        <button class="mt-4 p-3 bg-fuchsia-600 rounded-xl hover:bg-fuchsia-700 font-bold">ë‚´ ê²°ê³¼ë¬¼ ë³´ê¸°</button>
                    </div>
                </div>
            </div>
            
            <!-- í˜ì´ì§€ ì„¹ì…˜ 2: ë§ˆì´ í˜ì´ì§€ -->
            <div id="mypage" class="page-section hidden p-8 bg-indigo-900/40 rounded-xl shadow-2xl">
                <h2 class="text-4xl font-extrabold mb-8 text-cyan-400">My Page</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12 border-b border-indigo-500/50 pb-6">
                    <div class="font-bold text-lg text-gray-300">ì´ë¦„</div>
                    <div class="md:col-span-2 text-xl font-medium text-white">@@@</div>
                    <div class="font-bold text-lg text-gray-300">ì´ë©”ì¼</div>
                    <div class="md:col-span-2 text-xl font-medium text-white">abc12345@gmail.com</div>
                    <div class="font-bold text-lg text-gray-300">í”Œëœ</div>
                    <div class="md:col-span-2 text-xl font-medium text-white">Basic</div>
                </div>
                <h3 class="text-2xl font-bold mb-6 border-b border-cyan-400/50 pb-2">ìƒì„± ì´ë ¥ ì˜ìƒ</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="rounded-xl overflow-hidden shadow-lg border border-indigo-500/50">
                        <img src="https://placehold.co/400x400/312e81/ffffff?text=Generated+Image+1" alt="ìƒì„±ì´ë¯¸ì§€ 1" class="w-full history-image">
                        <div class="p-3 text-sm text-center bg-indigo-900/70">Urban Chic Style</div>
                    </div>
                    <div class="rounded-xl overflow-hidden shadow-lg border border-indigo-500/50">
                        <img src="https://placehold.co/400x400/312e81/ffffff?text=Generated+Image+2" alt="ìƒì„±ì´ë¯¸ì§€ 2" class="w-full history-image">
                        <div class="p-3 text-sm text-center bg-indigo-900/70">Street Vibe</div>
                    </div>
                    <div class="rounded-xl overflow-hidden shadow-lg border border-indigo-500/50">
                        <img src="https://placehold.co/400x400/312e81/ffffff?text=Generated+Image+3" alt="ìƒì„±ì´ë¯¸ì§€ 3" class="w-full history-image">
                        <div class="p-3 text-sm text-center bg-indigo-900/70">Vintage Mood</div>
                    </div>
                </div>
            </div>
            
                <!-- í˜ì´ì§€ ì„¹ì…˜ 3: AI ì†Œê°œ (ìˆ˜ì •ëœ ë¶€ë¶„) -->
            <div id="ai" class="page-section hidden p-8 bg-indigo-900/40 rounded-xl shadow-2xl relative overflow-hidden">
                <!-- ë°°ê²½ ì¥ì‹ ìš”ì†Œ -->
                <div class="absolute top-0 right-0 p-10 opacity-10 pointer-events-none">
                    <i data-lucide="cpu" class="w-64 h-64 text-cyan-500"></i>
                </div>
                
                <div class="relative z-10 text-center mb-12">
                    <h2 class="text-4xl font-extrabold mb-6 text-cyan-400 neon-text">AI Tech Behind LOUD</h2>
                    <p class="text-gray-300 text-lg leading-relaxed max-w-3xl mx-auto">
                        ë‹¨ í•œ ì¥ì˜ ì‚¬ì§„ìœ¼ë¡œ ì‹œì‘ë˜ëŠ” ë¬´í•œí•œ íŒ¨ì…˜ì˜ ì„¸ê³„.<br>
                        Google Geminiì˜ ìµœì‹  ì´ë¯¸ì§€ ìƒì„± ëª¨ë¸ì´ ë‹¹ì‹ ì˜ ìƒìƒì„ í˜„ì‹¤ë¡œ ë§Œë“­ë‹ˆë‹¤.
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 relative z-10 mb-12">
                    <!-- Feature 1 -->
                    <div class="bg-black/20 p-8 rounded-2xl border border-indigo-500/30 hover:border-cyan-400 transition duration-300 hover:transform hover:-translate-y-2 group">
                        <div class="w-16 h-16 bg-indigo-600/50 rounded-2xl flex items-center justify-center mb-6 mx-auto group-hover:bg-indigo-600 transition duration-300">
                            <i data-lucide="sparkles" class="w-8 h-8 text-white"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-3 text-center text-cyan-200">Generative Style Transfer</h3>
                        <!-- ìˆ˜ì •: ì „ë¬¸ì ì¸ ì„¤ëª… -> ì‰¬ìš´ ì„¤ëª… -->
                        <p class="text-gray-400 text-sm text-center leading-relaxed">
                            ì‚¬ì§„ ìœ„ì— ì˜·ì„ ë‹¨ìˆœíˆ ì˜¤ë ¤ ë¶™ì´ëŠ” ê²Œ ì•„ë‹ˆì—ìš”. ë§ˆì¹˜ ë‚´ê°€ ì‹¤ì œë¡œ ê·¸ ì˜·ì„ ì…ê³  ì°ì€ ê²ƒì²˜ëŸ¼, ì˜·ì˜ ì£¼ë¦„ê³¼ ì¬ì§ˆê¹Œì§€ ì•„ì£¼ ìì—°ìŠ¤ëŸ½ê²Œ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.
                        </p>
                    </div>

                    <!-- Feature 2 -->
                    <div class="bg-black/20 p-8 rounded-2xl border border-indigo-500/30 hover:border-cyan-400 transition duration-300 hover:transform hover:-translate-y-2 group">
                        <div class="w-16 h-16 bg-purple-600/50 rounded-2xl flex items-center justify-center mb-6 mx-auto group-hover:bg-purple-600 transition duration-300">
                            <i data-lucide="scan-face" class="w-8 h-8 text-white"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-3 text-center text-cyan-200">Identity Preservation</h3>
                        <!-- ìˆ˜ì •: ì „ë¬¸ì ì¸ ì„¤ëª… -> ì‰¬ìš´ ì„¤ëª… -->
                        <p class="text-gray-400 text-sm text-center leading-relaxed">
                            ì˜·ì„ ê°ˆì•„ì…í˜€ë„ ë‚´ ì–¼êµ´ì´ ë‹¤ë¥¸ ì‚¬ëŒì²˜ëŸ¼ ë³€í• ê¹Œ ê±±ì •í•˜ì§€ ë§ˆì„¸ìš”. AIê°€ ë‚´ ëˆˆ, ì½”, ì…ì„ ì •í™•íˆ ì•Œì•„ë³´ê³  ë‚´ ì–¼êµ´ ê·¸ëŒ€ë¡œ ìœ ì§€í•´ì¤ë‹ˆë‹¤.
                        </p>
                    </div>

                    <!-- Feature 3 -->
                    <div class="bg-black/20 p-8 rounded-2xl border border-indigo-500/30 hover:border-cyan-400 transition duration-300 hover:transform hover:-translate-y-2 group">
                        <div class="w-16 h-16 bg-cyan-600/50 rounded-2xl flex items-center justify-center mb-6 mx-auto group-hover:bg-cyan-600 transition duration-300">
                            <i data-lucide="wand-2" class="w-8 h-8 text-white"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-3 text-center text-cyan-200">Context Awareness</h3>
                        <!-- ìˆ˜ì •: ì „ë¬¸ì ì¸ ì„¤ëª… -> ì‰¬ìš´ ì„¤ëª… -->
                        <p class="text-gray-400 text-sm text-center leading-relaxed">
                            ì˜·ë§Œ ë©ê·¸ëŸ¬ë‹ˆ ë°”ë€Œë©´ ì–´ìƒ‰í•˜ê² ì£ ? 'í•´ë³€', 'ì¹´í˜' ê°™ì€ ì¥ì†Œë§Œ ì •í•´ì£¼ì„¸ìš”. ê·¸ ì˜·ì— ë”± ì–´ìš¸ë¦¬ëŠ” ë°°ê²½ê³¼ ì¡°ëª…ê¹Œì§€ AIê°€ ì•Œì•„ì„œ ì²™ì²™ ê¾¸ë©°ì¤ë‹ˆë‹¤.
                        </p>
                    </div>
                </div>

                <div class="text-center relative z-10">
                    <!-- ìˆ˜ì •: ë²„íŠ¼ í…ìŠ¤íŠ¸ ë° ì´ë™ ê²½ë¡œ (ìƒì„± í˜ì´ì§€ -> ë©”ì¸ í˜ì´ì§€) -->
                    <button onclick="navigateTo('trend')" class="p-4 px-12 font-bold rounded-xl cyan-button text-lg shadow-lg hover:shadow-cyan-500/50 transition flex items-center gap-2 mx-auto">
                        <span>ë©”ì¸ í˜ì´ì§€ë¡œ ê°€ê¸°</span>
                        <i data-lucide="home" class="w-5 h-5"></i>
                    </button>
                    <p class="mt-4 text-gray-500 text-sm">Powered by Google Gemini</p>
                </div>
            </div>

    <!-- ì•Œë¦¼ ëª¨ë‹¬: showAlert() í•¨ìˆ˜ë¥¼ í†µí•´ ì œì–´ë¨ -->
    <div id="custom-alert" class="fixed top-5 right-5 z-50 transform translate-x-full transition-transform duration-300">
        <div class="bg-indigo-900/90 border border-cyan-500/50 text-white px-6 py-4 rounded-xl shadow-2xl flex items-center gap-3 backdrop-blur-md">
            <i data-lucide="info" class="w-6 h-6 text-cyan-400"></i>
            <span id="alert-msg" class="font-medium">Message</span>
        </div>
    </div>

    <script>
        // --- ì „ì—­ ìƒìˆ˜ ë° ë³€ìˆ˜ ---
        const API_KEY = "AIzaSyCvLevOs3B-NXMDtUNwZhavPBah37XEFm8"; // âš ï¸ ì—¬ê¸°ì— ë°œê¸‰ë°›ì€ Gemini API í‚¤ë¥¼ ì…ë ¥í•´ì•¼ ì‘ë™í•©ë‹ˆë‹¤!
        const IMAGE_GEN_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image-preview:generateContent?key=${API_KEY}`;
        let currentPage = 'trend'; // í˜„ì¬ í™œì„±í™”ëœ í˜ì´ì§€ ID
        
        // --- í”„ë¡¬í”„íŠ¸ ë°ì´í„° ---
        const promptData = [
            {
                category: "ğŸ‘— íŒ¨ì…˜ ìŠ¤íƒ€ì¼ & ì½”ë””",
                items: [
                    { label: "ìºì£¼ì–¼", value: "Casual style" },
                    { label: "ë¯¸ë‹ˆë©€", value: "Minimalist fashion" },
                    { label: "ìŠ¤íŠ¸ë¦¿", value: "Streetwear" },
                    { label: "ë¹ˆí‹°ì§€", value: "Vintage fashion" },
                    { label: "í´ë˜ì‹", value: "Classic style" },
                    { label: "ìŠ¤í¬í‹°", value: "Sporty look" },
                    { label: "ê³ í”„ì½”ì–´", value: "Gorpcore" },
                    { label: "ê·¸ëŸ°ì§€", value: "Grunge style" },
                    { label: "í”„ë ˆí”¼", value: "Preppy look" },
                    { label: "ë¡œë§¨í‹±", value: "Romantic style" },
                    { label: "ë¹„ì¦ˆë‹ˆìŠ¤ ìºì£¼ì–¼", value: "Business casual" }
                ]
            },
            {
                category: "ğŸ“· ì¹´ë©”ë¼ ìœ„ì¹˜ì™€ êµ¬ë„ (Shot Type)",
                items: [
                    { label: "ì „ì‹ ", value: "Full body shot, wide shot" },
                    { label: "ë¬´ë¦ ìœ„", value: "Knee shot, 3/4 shot, from knees up" },
                    { label: "í—ˆë¦¬ ìœ„", value: "Waist shot, medium shot, from waist up" },
                    { label: "ê°€ìŠ´ ìœ„", value: "Bust shot, chest up" },
                    { label: "ìµìŠ¤íŠ¸ë¦¼ í´ë¡œì¦ˆì—…", value: "Extreme close-up, detailed eyes" },
                    { label: "ìˆ„ë” ìƒ·", value: "Over the shoulder shot" },
                    { label: "ì •ë©´", value: "Front view, facing camera" },
                    { label: "ì¸¡ë©´ ", value: "Side profile view" },
                    { label: "45ë„ ì¸¡ë©´", value: "Three-quarter view, 45-degree angle" },
                    { label: "ë’·ë©´ ", value: "Back view, from behind" },
                    { label: "ë‚®ì€ ì‹œì„ ", value: "Low angle shot, looking up" },
                    { label: "ë†’ì€ ì‹œì„ ", value: "High angle shot, looking down" }
                ]
            },
            {
                category: "ğŸ“ ì¥ì†Œ ë° ìƒí™© (TPO)",
                items: [
                    { label: "ì˜ˆì‹ì¥", value: "Wedding guest look, Wedding hall background" },
                    { label: "ì‡¼í•‘ëª°", value: "Shopping mall background, Shopping outfit" },
                    { label: "ì¹´í˜", value: "Cafe date outfit, Cafe background" },
                    { label: "ì¹œêµ¬ ë§Œë‚¨", value: "Hangout with friends, Casual street background" },
                    { label: "ì‚¬ë¬´ì‹¤", value: "Office wear, Modern office background" },
                    { label: "í”¼íŠ¸ë‹ˆìŠ¤", value: "Gym wear, Fitness center background" },
                    { label: "ê³µí•­ íŒ¨ì…˜", value: "Airport fashion, Airport terminal background" },
                    { label: "íœ´ì–‘ì§€, í•´ë³€", value: "Beach resort wear, Sunny beach background" },
                    { label: "ìº í¼ìŠ¤", value: "University campus background, College student look" }
                ]
            },
            {
                category: "ğŸŒ¤ï¸ ë‚ ì”¨ ë° ê³„ì ˆ",
                items: [
                    { label: "í™”ì°½í•œ", value: "Sunny day, Clear blue sky, Bright lighting" },
                    { label: "íë¦°", value: "Cloudy day, Overcast sky, Soft lighting" },
                    { label: "ë¹„ì˜¤ëŠ”", value: "Rainy day, Wet streets, Holding an umbrella" },
                    { label: "ëˆˆ ë‚´ë¦¬ëŠ”", value: "Snowy day, Winter fashion, Snow background" },
                    { label: "ë°”ëŒ ë¶€ëŠ”", value: "Windy day, Hair blowing in wind" },
                    { label: "ë´„", value: "Spring season, Cherry blossoms background" },
                    { label: "ê°€ì„", value: "Autumn season, Falling leaves background" },
                    { label: "í•´ì§ˆë…˜", value: "Golden hour, Sunset lighting" }
                ]
            },
            {
                category: "âœ¨ í™”ì§ˆ ë° í€„ë¦¬í‹°",
                items: [
                    { label: "ì‚¬ì§„(í˜„ì‹¤ê°)", value: "Photorealistic" },
                    { label: "ì´ˆí˜„ì‹¤ì ì¸", value: "Hyper-realistic" },
                    { label: "ì´ˆê³ í•´ìƒë„", value: "8k_resolution" },
                    { label: "ì •ë°€í•œ ë¬˜ì‚¬", value: "Highly_detailed" },
                    { label: "ê±¸ì‘", value: "Masterpiece" }
                ]
            }
        ];

        // ë¹ ë¥¸ ì¡°íšŒë¥¼ ìœ„í•´ í•œê¸€ ë¼ë²¨ì„ ì˜ë¬¸ ê°’ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ë§µì„ ìƒì„±í•©ë‹ˆë‹¤.
        const labelToValueMap = {};
        promptData.forEach(section => {
            if (section.isGrouped) {
                section.groups.forEach(group => group.items.forEach(item => { labelToValueMap[item.label] = item.value; }));
            } else {
                section.items.forEach(item => { labelToValueMap[item.label] = item.value; });
            }
        });

        // --- ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ---

        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result.split(',')[1]); 
                reader.onerror = error => reject(error);
            });
        }

        function alertMessage(msg) {
            const alertBox = document.getElementById('custom-alert');
            const alertMsg = document.getElementById('alert-msg');
            if (alertBox && alertMsg) {
                alertMsg.textContent = msg;
                alertBox.classList.remove('translate-x-full');
                setTimeout(() => alertBox.classList.add('translate-x-full'), 3000);
            }
        }

        // --- UI ë Œë”ë§ ë° ì´ë²¤íŠ¸ ì²˜ë¦¬ í•¨ìˆ˜ ---

        function renderPromptOptions() {
            const container = document.getElementById('prompt-options-container');
            if (!container) return;
            container.innerHTML = ''; 

            promptData.forEach((section, index) => {
                const details = document.createElement('details');
                details.className = "group border border-indigo-500/30 rounded-xl bg-indigo-900/20 overflow-hidden";
                if(index === 0) details.open = true; // ì²« ë²ˆì§¸ ì„¹ì…˜ì€ ê¸°ë³¸ì ìœ¼ë¡œ ì—´ì–´ë‘ 

                const summary = document.createElement('summary');
                summary.className = "flex items-center justify-between p-4 text-sm font-bold text-indigo-200 hover:bg-white/5 transition select-none";
                summary.innerHTML = `<span class="flex items-center gap-2">${section.category}</span><i data-lucide="chevron-down" class="w-4 h-4 transition-transform group-open:rotate-180"></i>`;

                const contentDiv = document.createElement('div');
                contentDiv.className = "p-4 border-t border-indigo-500/30 bg-black/20 flex flex-wrap gap-2";

                if (section.isGrouped) {
                    section.groups.forEach(group => {
                        const groupTitle = document.createElement('div');
                        groupTitle.className = "w-full text-xs text-cyan-400 mt-2 mb-1 font-bold";
                        groupTitle.textContent = group.name;
                        contentDiv.appendChild(groupTitle);
                        group.items.forEach(item => contentDiv.appendChild(createChip(item)));
                    });
                } else {
                    section.items.forEach(item => contentDiv.appendChild(createChip(item)));
                }

                details.appendChild(summary);
                details.appendChild(contentDiv);
                container.appendChild(details);
            });
            
            lucide.createIcons(); 
        }

        function createChip(item) {
            const btn = document.createElement('button');
            btn.className = "option-chip";
            btn.textContent = item.label;
            
            btn.onclick = () => {
                const textArea = document.getElementById('style-prompt');
                if (!textArea) return;
                let currentText = textArea.value.trim();
                
                if (currentText.length > 0 && !currentText.endsWith(',')) {
                    textArea.value = currentText + ", " + item.label;
                } else {
                    textArea.value = currentText + (currentText.length > 0 ? " " : "") + item.label;
                }
                
                textArea.focus();
                btn.classList.add('selected'); // í´ë¦­ í”¼ë“œë°±
                setTimeout(() => btn.classList.remove('selected'), 300);
            };
            return btn;
        }

        function previewImage(event) {
            const file = event.target.files[0];
            if(file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    document.getElementById('image-preview').src = e.target.result;
                    document.getElementById('image-preview').classList.remove('hidden');
                    document.getElementById('upload-placeholder').classList.add('hidden');
                    document.getElementById('generate-button').disabled = false;
                };
                reader.readAsDataURL(file);
            }
        }

        // --- í•µì‹¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ ---

        function navigateTo(targetPage) {
            console.log(`[navigateTo] Target page: ${targetPage}`);
            currentPage = targetPage;
            document.querySelectorAll('.page-section').forEach(section => {
                if (section.id === targetPage) {
                    section.classList.remove('hidden');
                    console.log(`[navigateTo] Showing section: ${section.id}`);
                } else {
                    section.classList.add('hidden');
                    console.log(`[navigateTo] Hiding section: ${section.id}`);
                }
            });
            if (targetPage === 'trend') initializeTabs(); 
            lucide.createIcons();
        }

        function initializeTabs() {
            console.log('[initializeTabs] Initializing tabs for trend section.');
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabIndicator = document.getElementById('tab-indicator');
            const initialButton = document.querySelector('.tab-button[data-tab="trend-feed"]');

            if (initialButton && tabIndicator) {
                const rect = initialButton.getBoundingClientRect();
                const parentRect = initialButton.closest('#tabs').getBoundingClientRect();
                tabIndicator.style.transition = 'none'; 
                tabIndicator.style.left = `${rect.left - parentRect.left}px`;
                tabIndicator.style.width = `${rect.width}px`;
                setTimeout(() => { tabIndicator.style.transition = 'left 0.3s ease, width 0.3s ease'; }, 50);
                setActiveTab('trend-feed');
            }
        }
        
        function setActiveTab(tabId) {
            console.log(`[setActiveTab] Activating tab: ${tabId}`);
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabIndicator = document.getElementById('tab-indicator');
            const tabPages = document.querySelectorAll('.tab-page');
            
            tabPages.forEach(page => {
                if (page.id === tabId) {
                    page.classList.remove('hidden');
                    console.log(`[setActiveTab] Showing tab page: ${page.id}`);
                } else {
                    page.classList.add('hidden');
                    console.log(`[setActiveTab] Hiding tab page: ${page.id}`);
                }
            });

            if (tabIndicator) {
                tabButtons.forEach(button => {
                    const isActive = button.getAttribute('data-tab') === tabId;
                    button.classList.remove('bg-gray-500', 'bg-gray-400', 'bg-gray-300');
                    button.classList.remove('hover:bg-gray-500'); 
                    button.classList.add('text-white'); 

                    if (isActive) {
                        const rect = button.getBoundingClientRect();
                        const parentRect = button.closest('#tabs').getBoundingClientRect();
                        tabIndicator.style.left = `${rect.left - parentRect.left}px`;
                        tabIndicator.style.width = `${rect.width}px`;
                        tabIndicator.style.backgroundColor = '#808080';
                        button.classList.add('bg-gray-500'); 
                    } else {
                        const dataTab = button.getAttribute('data-tab');
                        if (dataTab === 'trend-feed') {
                            button.classList.add('bg-gray-400', 'hover:bg-gray-500'); 
                        } else if (dataTab === 'beginner') {
                            button.classList.add('bg-gray-400', 'hover:bg-gray-500'); 
                        } else if (dataTab === 'results') {
                            button.classList.add('bg-gray-300', 'hover:bg-gray-500'); 
                        }
                    }
                });
            }
            lucide.createIcons();
        }

        function goToCreateCoordi() {
            navigateTo('trend');
            setActiveTab('create-coordi');
            window.scrollTo(0, 0);
        }

        async function generateCoordi() {
            const rawPrompt = document.getElementById('style-prompt').value.trim();
            const fileInput = document.getElementById('file-input');
            const genderValue = document.querySelector('input[name="gender"]:checked').value;
            
            if(!fileInput.files[0] || !rawPrompt) {
                alertMessage("ì´ë¯¸ì§€ì™€ ìŠ¤íƒ€ì¼ ì„¤ëª…ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                return;
            }

            let finalPrompt = `${genderValue}, ${rawPrompt}`;
            
            Object.keys(labelToValueMap).forEach(label => {
                finalPrompt = finalPrompt.replaceAll(label, labelToValueMap[label]);
            });

            const facePreservationInstruction = "Based on the input image, change the clothing, style, and background as described, but you MUST preserve the person's face, facial features, and identity exactly as they are in the input image. ";
            finalPrompt = facePreservationInstruction + finalPrompt;

            const loading = document.getElementById('loading-indicator');
            const resultArea = document.getElementById('result-area');
            const resultContainer = document.getElementById('result-container');
            const btn = document.getElementById('generate-button');

            try {
                resultArea.classList.remove('hidden');
                loading.classList.remove('hidden');
                resultContainer.classList.add('hidden');
                btn.disabled = true;
                resultArea.scrollIntoView({ behavior: 'smooth' });

                const base64Img = await fileToBase64(fileInput.files[0]);
                const response = await fetch('http://127.0.0.1:5000/api/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        prompt: finalPrompt,
                        image: base64Img,
                        mimeType: fileInput.files[0].type || "image/jpeg"
                    })
                });

                if(!response.ok) {
                    // Try to get error message from backend's JSON response
                    const errorData = await response.json().catch(() => null);
                    const errorMessage = errorData?.error || `ì„œë²„ ìš”ì²­ ì‹¤íŒ¨ (${response.status})`;
                    throw new Error(errorMessage);
                }

                const data = await response.json();
                const resultBase64 = data.image;

                if(resultBase64) {
                    document.getElementById('result-image').src = `data:image/png;base64,${resultBase64}`;
                    loading.classList.add('hidden');
                    resultContainer.classList.remove('hidden');
                } else {
                    throw new Error("API ì‘ë‹µì—ì„œ ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                }

            } catch (e) {
                console.error("ì˜¤ë¥˜ ë°œìƒ:", e);
                loading.classList.add('hidden');
                alertMessage("ì˜¤ë¥˜: " + e.message);
            } finally {
                btn.disabled = false; 
            }
        }

        function downloadResult() {
            const link = document.createElement('a');
            link.href = document.getElementById('result-image').src;
            link.download = 'ai-stylist-result.png';
            link.click();
        }

        let currentZoomedElement = null;

        function toggleZoom(element) {
            if (currentZoomedElement && currentZoomedElement !== element) {
                currentZoomedElement.classList.remove('scale-125', 'z-20');
                currentZoomedElement.classList.add('hover:scale-[1.02]');
            }

            element.classList.toggle('scale-125');
            element.classList.toggle('z-20'); 
            element.classList.toggle('hover:scale-[1.02]'); 

            if (element.classList.contains('scale-125')) {
                currentZoomedElement = element;
            } else {
                currentZoomedElement = null;
            }
        }

        // [ìˆ˜ì •ë¨] ë³„(ì €ì¥) ì•„ì´ì½˜ í† ê¸€ í•¨ìˆ˜: <i> íƒœê·¸ê°€ <svg>ë¡œ ë³€í™˜ë˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì—¬ ìˆ˜ì •
        function toggleStar(event, button) {
            event.stopPropagation(); // ë¶€ëª¨ ìš”ì†Œì˜ toggleZoom ì´ë²¤íŠ¸ ì „íŒŒ ë°©ì§€
            // Lucide ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ <i> íƒœê·¸ë¥¼ <svg> íƒœê·¸ë¡œ ë³€í™˜í•˜ë¯€ë¡œ, ë‘ ê²½ìš° ëª¨ë‘ë¥¼ ì²´í¬í•©ë‹ˆë‹¤.
            const icon = button.querySelector('svg') || button.querySelector('i');
            
            if (!icon) return;

            // svgì˜ ê²½ìš° fill ì†ì„±ê°’ì´ 'none' ë˜ëŠ” ì—†ì„ ìˆ˜ ìˆìŒ
            if (icon.getAttribute('fill') === 'none' || !icon.getAttribute('fill')) {
                icon.setAttribute('fill', 'currentColor');
                icon.classList.remove('text-white', 'group-hover/star:text-yellow-400');
                icon.classList.add('text-yellow-400');
            } else {
                icon.setAttribute('fill', 'none');
                icon.classList.remove('text-yellow-400');
                icon.classList.add('text-white', 'group-hover/star:text-yellow-400');
            }
        }

        // [ìˆ˜ì •ë¨] í•˜íŠ¸(ì¢‹ì•„ìš”) ì•„ì´ì½˜ í† ê¸€ ë° ìˆ«ì ë³€ê²½ í•¨ìˆ˜: <i> íƒœê·¸ê°€ <svg>ë¡œ ë³€í™˜ë˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì—¬ ìˆ˜ì •
        function toggleHeart(event, button) {
            event.stopPropagation(); // ë¶€ëª¨ ìš”ì†Œì˜ toggleZoom ì´ë²¤íŠ¸ ì „íŒŒ ë°©ì§€
            const icon = button.querySelector('svg') || button.querySelector('i');
            const countSpan = button.querySelector('span');
            
            if (!icon || !countSpan) return;

            let count = parseInt(countSpan.textContent.replace(/,/g, ''));

            if (icon.getAttribute('fill') === 'none' || !icon.getAttribute('fill')) {
                icon.setAttribute('fill', 'currentColor');
                icon.classList.remove('text-white', 'group-hover/heart:text-red-500');
                icon.classList.add('text-red-500');
                count++;
            } else {
                icon.setAttribute('fill', 'none');
                icon.classList.remove('text-red-500');
                icon.classList.add('text-white', 'group-hover/heart:text-red-500');
                count--;
            }
            countSpan.textContent = count;
        }

        // --- í˜ì´ì§€ ì´ˆê¸°í™” ---

        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons(); // ì•„ì´ì½˜ ë Œë”ë§
            navigateTo('trend'); // ì´ˆê¸° í˜ì´ì§€ ì„¤ì •
            
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    setActiveTab(button.getAttribute('data-tab'));
                });
            });

            window.addEventListener('resize', initializeTabs);
            
            initializeTabs();
            renderPromptOptions(); 
        });
        
    </script>
</body>
</html>